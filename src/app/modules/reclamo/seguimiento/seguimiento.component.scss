:host { display: block; }

/* ===========================
   Encabezado
   =========================== */
.title-row{
    display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:.25rem;
}
.header-actions button{ border-color:#0B4A8E;color:#0B4A8E; }

/* FAB imprimir */
.print-fab{
    position:fixed;right:24px;bottom:24px;background:#0B4A8E!important;
    box-shadow:0 8px 24px rgba(0,0,0,.2);z-index:1000;
}

/* etiqueta general para ocultar en impresión */
.no-print{ display:inline-flex; }
/* ===========================
   IMPRESIÓN
   =========================== */
@media print {
    .no-print, button, mat-icon-button, .table-actions, .row-tools { display:none!important; }

    body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    @page { size: A4 portrait; margin: 8mm 10mm; }
    .seguimiento-container { padding: 0!important; }

    .panel, .table-card { box-shadow:none!important; border:1px solid #b9c6d8; }
    .panel-header, .table-header { background:#A7C1DF!important; color:#0B4A8E!important; }
    * { line-height:1.1!important; font-size:12px!important; }

    /* Oculta etiquetas móviles ::before */
    .table-body .row > div::before,
    .table-body .row.five-cols > div::before {
        content:"" !important; display:none !important;
    }

    /* === PRIMERA TABLA (Seguimientos) — 4 columnas y INFO más ancha === */
    .table-card:first-of-type .table-header{
        display:grid !important;
        grid-template-columns: 80px 60px 100px 1fr !important; /* Fecha | Hora | Encargado | Información (ahora MUY ancha) */
        column-gap: 6px !important;
    }
    .table-card:first-of-type .table-body .row{
        display:grid !important;
        grid-template-columns: 80px 60px 100px 1fr !important; /* la última columna ocupa todo lo restante */
        padding: 4px 8px !important;
        margin: 0 !important;
        padding-right: 0 !important;
        position: static !important;
        column-gap: 6px !important;
    }

    /* Asegura que el área de Información use el 100% del ancho */
    .table-card:first-of-type .table-body .row > div:nth-child(4),
    .table-card:first-of-type .table-header > div:nth-child(4){
        width: 100% !important;
        max-width: 100% !important;
    }

    .table-card:first-of-type .table-body .row > div:nth-child(4) .cell-textarea,
    .table-card:first-of-type .table-body .row > div:nth-child(4) textarea{
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box;
        min-height: 90px !important;
        height: auto !important;
        resize: none !important;
        overflow: visible !important;
        white-space: normal !important;
    }

    /* “• Guardado” debajo del texto (sin crear nueva columna) */
    .table-card:first-of-type .table-body .row.locked-row > div:nth-child(4)::after{
        content: "  •  Guardado";
        display: block;
        margin-top: 4px;
        font-weight: 600;
        color: #1c3655;
        white-space: nowrap;
    }

    /* === SEGUNDA TABLA (Llamadas/Contacto) — 5 columnas como siempre === */
    .table-card:nth-of-type(2) .table-header{
        display:grid !important;
        grid-template-columns: 100px 60px 140px 160px minmax(0,1fr) !important; /* sin columna extra */
    }
    .table-card:nth-of-type(2) .table-body .row{
        display:grid !important;
        grid-template-columns: 100px 60px 140px 160px minmax(0,1fr) !important; /* Observaciones = última y flexible */
        padding: 4px 8px !important;
        margin: 0 !important;
        padding-right: 0 !important;
        position: static !important;
    }

    /* “• Guardado” a la DERECHA (en la última celda de cada fila) */
    .table-card:nth-of-type(2) .table-body .row.locked-row > div:last-child{
        text-align: right !important;
    }
    .table-card:nth-of-type(2) .table-body .row.locked-row > div:last-child::after{
        content: "• Guardado";
        display: inline-block;
        margin-left: 8px;
        font-weight: 600;
        color: #1c3655;
        white-space: nowrap;
    }

    /* Inputs nítidos en papel */
    input, textarea{
        border:1px solid #a5b4c8!important;
        background:white!important;
        box-shadow:none!important;
        padding:4px 6px!important;
        font-size:12px!important;
    }

    /* Oculta cualquier chip/estado flotante para evitar solapes */
    .row-status { display:none!important; }
}

/* ===========================
   Tipografía & paneles (pantalla)
   =========================== */
.title{ font-size:28px;font-weight:800;color:#114a86;margin:0 0 4px 0; }
.sub{ color:#5a6c80;margin:0 0 16px 0; }
.panel{ background:#fff;border-radius:10px; }
.panel-header{
    background:#98b3d4;color:#223b5c;font-weight:700;padding:10px 12px;
    border-top-left-radius:8px;border-top-right-radius:8px;
}
.panel-body{ padding:12px 12px 4px 12px; }

/* ===========================
   Filas detalle (encabezado)
   =========================== */
.row{
    display:grid;grid-template-columns:220px 1fr;gap:12px;margin:6px 0;
}
.row.two-cols{ grid-template-columns:1fr 1fr; }
.label{ font-weight:600;color:#2f4a66; }
.value{ color:#1b2b40; }

/* ===========================
   Tabla (pantalla)
   =========================== */
.table-card{
    background:#fff;border-radius:12px;margin-top:10px;
    box-shadow:0 1px 0 rgba(0,0,0,.04),0 4px 18px rgba(17,74,134,.08);
}
.table-header{
    display:grid;grid-template-columns:120px 80px 170px 1fr; /* Seguimientos */
    background:#b3c7df;color:#1c3655;font-weight:700;padding:10px 12px;
    border-top-left-radius:12px;border-top-right-radius:12px;
}
.table-header.five-cols{ grid-template-columns:120px 80px 190px 200px 1fr; } /* Llamadas */

.table-body .row{
    display:grid;grid-template-columns:100px 70px 160px 1fr;align-items:start;background:#fff;
    padding-right:clamp(180px,9vw,260px);border-top:1px solid #e4ecf5;position:relative;
}
.table-body .row.five-cols{
    grid-template-columns:100px 70px 170px 200px 1fr;padding-right:clamp(160px,8vw,240px);
}

/* Inputs */
.cell-input, .cell-textarea{
    width:100%;min-width:0;border:1px solid #d7e3f2;border-radius:8px;padding:8px 10px;
    outline:none;font:inherit;background:#f9fbfe;
}
.cell-input:focus, .cell-textarea:focus{ border-color:#6ea1df;background:#fff; }
.cell-textarea{ min-height:64px;
    max-width: 650px;
    resize:vertical;
    white-space:pre-wrap;
    word-break:break-word; }

.table-actions{ display:flex;justify-content:flex-end;padding:10px 12px 14px 12px; }
.icon-trash{ position:absolute;right:8px;top:8px;color:#cc3344; }

/* Bloqueado */
.locked-row input, .locked-row textarea{
    background:#f6f7fb!important;border-color:#e0e6f1!important;color:#55647a!important;pointer-events:none;
}

/* ===========================
   Herramientas por fila (canal/confirmar)
   =========================== */
.row-tools{
    position:absolute;right:12px;top:8px;display:flex;gap:6px;align-items:center;z-index:5;flex-wrap:wrap;
}

/* Toggles canal compactos y visibles */
.canal-toggle{
    display:inline-flex;gap:4px;background:#f2f6fc;border:1px solid #9db7d8;border-radius:10px;padding:2px 4px;flex-shrink:0;
}
.canal-toggle mat-button-toggle{
    min-width:34px;height:32px;padding:0 6px;border-radius:8px;border:1px solid transparent;background:#fff;
}
.canal-toggle mat-button-toggle.mat-button-toggle-checked{ background:#dfeaf7;border-color:#0b4a8e; }
.canal-toggle mat-icon{ font-size:18px;line-height:18px; }

/* Botón confirmar  */
.confirm-btn{
    border-color:#0b4a8e!important;color:#0b4a8e!important;height:32px;padding:0 10px;font-size:12px;
    line-height:32px;min-width:0;
}
.confirm-btn mat-icon{ font-size:18px;margin-right:4px; }

/* Estado flotante (solo pantalla) */
.row-status{ position:absolute;right:12px;top:8px; }
mat-chip{ font-weight:600;color:#123a66;background:#e8f0fe;white-space:nowrap; }
.chip-wa{ background:#e7f7ee;color:#0f5132; }
.chip-mail{ background:#eef4ff;color:#1a3e79; }
.chip-nota{ background:#fff7e6;color:#7a4a00; }
.chip-llamada{ background:#fff3cd;color:#7a4a00;font-weight:600; }

/* ===========================
   Responsive (solo pantalla)
   =========================== */
/* Tablets */
@media screen and (max-width:1024px){
    .table-body .row{ padding-right:180px; }
    .table-body .row.five-cols{ padding-right:160px; }
}

/* Móvil (layout card/stacked) */
@media screen and (max-width:768px){
    .table-header, .table-header.five-cols{ display:none; }
    .table-body{ padding:4px 6px 10px; }
    .table-body .row, .table-body .row.five-cols{
        padding:12px;margin:10px 6px;border:1px solid #e6eef7;border-radius:12px;
        box-shadow:0 2px 10px rgba(17,74,134,.05);grid-template-columns:1fr;gap:10px;padding-right:0;
    }
    .table-body .row > div, .table-body .row.five-cols > div{
        display:grid;grid-template-columns:120px 1fr;align-items:start;gap:8px;
    }
    /* Etiquetas para móvil (Seguimientos) */
    .table-body .row > div:nth-child(1)::before{ content:"Fecha"; }
    .table-body .row > div:nth-child(2)::before{ content:"Hora"; }
    .table-body .row > div:nth-child(3)::before{ content:"Encargado"; }
    .table-body .row > div:nth-child(4)::before{ content:"Información"; }
    /* Etiquetas para móvil (Llamadas) */
    .table-body .row.five-cols > div:nth-child(1)::before{ content:"Fecha"; }
    .table-body .row.five-cols > div:nth-child(2)::before{ content:"Hora"; }
    .table-body .row.five-cols > div:nth-child(3)::before{ content:"Celular/Correo"; }
    .table-body .row.five-cols > div:nth-child(4)::before{ content:"A quién"; }
    .table-body .row.five-cols > div:nth-child(5)::before{ content:"Observaciones"; }

    .table-body .row > div::before, .table-body .row.five-cols > div::before{
        display:inline-block;font-weight:600;color:#2f4a66;min-width:120px;padding-top:6px;
    }

    .cell-input, .cell-textarea{ width:100%; }
    .cell-textarea{ min-height:90px; }

    /* Herramientas y estado pasan debajo */
    .row-tools{ position:static;margin-top:6px;justify-content:flex-end;flex-wrap:wrap;gap:8px; }
    .row-status{ position:static;margin-top:4px;display:inline-flex;justify-content:flex-end;width:100%; }

    /* Detalle de expediente en una columna */
    .row, .row.two-cols{ grid-template-columns:1fr; }
}
