<div class="cerrado-container p-6">
    <!-- Título + acción -->
    <div class="title-row">
        <div>
            <h1 class="title">Cerrado</h1>
            <p class="sub">Recibo de entrega</p>
        </div>

        <div class="header-actions no-print">
            <button mat-stroked-button (click)="print()">
                <mat-icon>print</mat-icon>
                Imprimir
            </button>
        </div>
    </div>

    <!-- Detalles de seguimiento -->
    <div class="panel">
        <div class="panel-header">Detalles de seguimiento</div>
        <div class="panel-body">
            <div class="row">
                <span class="label">Tipo de expediente:</span>
                <span class="value">{{ seguimiento.tipoExpediente }}</span>
            </div>
            <div class="row">
                <span class="label">Numero de Pir:</span>
                <span class="value">{{ seguimiento.numeroPir }}</span>
            </div>
            <div class="row">
                <span class="label">Fecha de reclamo:</span>
                <span class="value">{{ seguimiento.fechaReclamo }}</span>
            </div>
            <div class="row">
                <span class="label">Nombres y apellidos:</span>
                <span class="value">{{ seguimiento.nombres }}</span>
            </div>
        </div>
    </div>

    <!-- Detalles de entrega -->
    <div class="panel mt-6">
        <div class="panel-header">Detalles de entrega</div>
        <div class="panel-body">
            <!-- Fecha -->
            <div class="row">
                <label class="label" for="fent">Fecha de entrega:</label>
                <input id="fent" class="input" type="date" [(ngModel)]="form.fechaEntrega" />
            </div>

            <!-- Cantidad -->
            <div class="row">
                <label class="label" for="cant">Cantidad de equipajes entregados:</label>
                <input id="cant" class="input short" type="number" min="0" [(ngModel)]="form.cantidadEquipajes" />
            </div>

            <!-- Entrega en -->
            <div class="entrega-section">
                <h3>Detalles de entrega</h3>

                <div class="radio-group">
                    <label>
                        <input type="radio" name="entrega" [(ngModel)]="entregaModo" value="aeropuerto" />
                        Entrega en aeropuerto
                    </label>
                    <label>
                        <input type="radio" name="entrega" [(ngModel)]="entregaModo" value="domicilio" />
                        Entrega en domicilio
                    </label>
                </div>

                <div class="direccion-group" *ngIf="entregaModo === 'domicilio'">
                    <label>Dirección de entrega:</label>
                    <input
                        type="text"
                        class="direccion-input"
                        [(ngModel)]="direccion"
                        placeholder="Ej. Calle Lanza N°123, zona norte..."
                    />
                </div>

                <div class="botones-entrega">
                    <button class="btn btn-confirmar" (click)="abrirModalMensaje()">Confirmar entrega</button>

                    <label class="btn btn-subir">
                        Subir comprobante firmado
                        <input type="file" accept="image/*,.pdf" (change)="subirComprobante($event)" hidden />
                    </label>
                </div>

                <div *ngIf="archivoSubido" class="archivo-info">
                    <p>✅ Archivo cargado: <b>{{ archivoSubido.name }}</b></p>
                </div>
            </div>

            <!-- MODAL DE CONFIRMACIÓN -->
            <div class="modal-backdrop" *ngIf="modalAbierto">
                <div class="modal">
                    <h3>Mensaje a enviar</h3>
                    <textarea [(ngModel)]="mensajeWhatsApp" rows="6"></textarea>

                    <div class="row">
                        <button class="btn btn-light" (click)="cerrarModal()">Cancelar</button>
                        <button class="btn btn-amarillo" (click)="copiarMensaje()">Copiar</button>
                        <button class="btn btn-confirmar" (click)="abrirWhatsApp()">Enviar por WhatsApp</button>
                    </div>

                    <p *ngIf="copiado" class="copiado">✅ Mensaje copiado al portapapeles</p>
                </div>
            </div>


        </div>

        <div class="note">
            Si usted llegó a un acuerdo con la empresa o si no desea continuar con el presente reclamo,
            le solicitamos firmar en el siguiente recuadro.
        </div>

        <!-- Caja de firma -->
        <div class="signature-card">
            <div class="sig-row two-cols">
                <div class="sig-cell">
                    <div class="sig-label">Firma:</div>
                    <div class="sig-box"></div>
                </div>
                <div class="sig-cell">
                    <div class="sig-label">C.I.:</div>
                    <input class="sig-input" [(ngModel)]="form.ci" />
                </div>
            </div>

            <div class="sig-row">
                <div class="sig-label">Aclaracion de firma:</div>
                <input class="sig-input" [(ngModel)]="form.aclaracion" />
            </div>

            <div class="sig-row">
                <div class="sig-label">Observaciones:</div>
                <textarea class="sig-textarea" [(ngModel)]="form.observaciones"></textarea>
            </div>
        </div>
    </div>

    <!-- FAB imprimir -->
    <button class="print-fab no-print" mat-fab (click)="print()">
        <mat-icon>print</mat-icon>
    </button>

</div>
