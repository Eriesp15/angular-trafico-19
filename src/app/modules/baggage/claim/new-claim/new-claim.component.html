<form class="realizar-reclamo-container" [formGroup]="pIR" (ngSubmit)="onSubmit()">


  <div class="form-group" formArrayName="route">
      <h2>Rutas de Vuelo</h2>
    <div *ngFor="let stop of route.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="stop" placeholder="Ruta {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarRuta(i)"
                [disabled]="route.length <= 2">
          ✕ Eliminar
        </button>
        <button type="button" 
            class="btn-add"
            (click)="agregarRuta()" 
            [disabled]="route.length >= 5">
          + Agregar Ruta
        </button>
      </div>
    </div>
  </div>
  
  <div class="form-field">
    <label>Aeropuerto</label>
    <input type="text" formControlName="airport" placeholder="Aeropuerto">
  </div>

  <!-- falta claimtype-->
  <div class="section">
    <div class="form-field">
      <label>Aeropuerto</label>
      <input type="text" formControlName="airportText" placeholder="Aeropuerto">
    </div>
      <div class="form-field">
      <label>Aerolinea</label>
      <input type="text" formControlName="airline" placeholder="Aerolinea">
    </div>
    <div class="form-field">
      <label>Referencia</label>
      <input type="text" formControlName="reference" placeholder="Referencia">
    </div>
  </div>
  <div class="section">
    <div class="form-field">
      <label>Apellidos del pasajero</label>
      <input type="text" formControlName="passengerLastName" placeholder="Apellidos del pasajero">
    </div>
    <div class="form-field">
      <label>Nombres del pasajero</label>
      <input type="text" formControlName="passengerName" placeholder="Nombres del pasajero">
    </div>
  </div>
  <div class="section">
    <div class="form-field">
      <label>Iniciales en el equipaje</label>
      <input type="text" formControlName="initials" placeholder="Iniciales en el equipaje">
    </div>
  </div>

  <div class="section">
    <h2>Bagtags</h2>
    
    <div class="form-group" formArrayName="bagtags">
      <div *ngFor="let bagtag of bagtags.controls; let i = index" class="bagtag-item">
        <div [formGroupName]="i">
          <input type="text" 
                formControlName="number" 
                placeholder="Ej: ABC123456"
                class="bagtag-input">
          
          <button type="button" 
                  class="btn-remove"
                  (click)="eliminarBagtag(i)"
                  [disabled]="bagtags.length <= 1">
            ✕ Eliminar
          </button>
        </div>
      </div>
      
      <div *ngIf="bagtags.length === 0" class="sin-bagtags">
        No hay bagtags agregados
      </div>
    </div>
    
    <button type="button" 
            class="btn-add"
            (click)="agregarBagtag()"
            [disabled]="bagtags.length >= 5">
      + Agregar Bagtag
    </button>
  </div>

  <div class="section">
    <h2>Color/tipo/descripcion</h2>
    
    <div class="form-group" formArrayName="bagDescriptions">
      <div *ngFor="let bagDescription of bagDescriptions.controls; let i = index" class="bagtag-item">
        <div [formGroupName]="i">
          <input type="text" 
                formControlName="description" 
                placeholder="Ej: 234/43/32"
                class="bagtag-input">
          
          <button type="button" 
                  class="btn-remove"
                  (click)="eliminarBagDescription(i)"
                  [disabled]="bagDescriptions.length <= 1">
            ✕ Eliminar
          </button>
        </div>
      </div>
      
      <div *ngIf="bagDescriptions.length === 0" class="sin-bagtags">
        No hay descripciones de maletas agregadas
      </div>
    </div>
    
    <button type="button" 
            class="btn-add"
            (click)="agregarBagDescription()"
            [disabled]="bagDescriptions.length >= 5">
      + Agregar descripcion de maleta
    </button>
  </div>

  <div class="form-group" formArrayName="traceRoute">
      <h2>Ruta a rastrear</h2>
    <div *ngFor="let stop of traceRoute.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="traceRouteStop" placeholder="Ruta {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarRutaARastrear(i)"
                [disabled]="traceRoute.length <= 1">
          ✕ Eliminar
        </button>
        <button type="button" 
            class="btn-add"
            (click)="agregarRutaARastrear()" 
            [disabled]="traceRoute.length >= 5">
          + Agregar Ruta a Rastrear
        </button>
      </div>
    </div>
  </div>

  <div class="section">
    <button type="submit" 
            class="btn-submit"
            [disabled]="pIR.invalid">
      Enviar
    </button>
  </div>
</form>