<form class="realizar-reclamo-container" [formGroup]="pIR" (ngSubmit)="onSubmit()">


  <div class="form-group" formArrayName="route">
      <h2>Rutas de Vuelo</h2>
    <div *ngFor="let stop of route.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="stop" placeholder="Ruta {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarRuta(i)"
                [disabled]="route.length <= 2">
          ✕ Eliminar
        </button>
      </div>
    </div>
    <button type="button" 
        class="btn-add"
        (click)="agregarRuta()" 
        [disabled]="route.length >= 5">
      + Agregar Ruta
    </button>
  </div>
  
  <div class="form-field">
    <label>Aeropuerto</label>
    <input type="text" formControlName="airport" placeholder="Aeropuerto">
  </div>

  <div class="form-group">
    <h3>Tipo de Reclamo *</h3>
    
    <div class="tipo-reclamo-grid">
      <label class="tipo-card" 
            [class.selected]="pIR.get('claimType')?.value === 'AHL'">
        <input type="radio" 
              formControlName="claimType" 
              value="AHL">
        <span class="tipo-label">AHL</span>
      </label>
      
      <label class="tipo-card" 
            [class.selected]="pIR.get('claimType')?.value === 'DAMAGED'">
        <input type="radio" 
              formControlName="claimType" 
              value="DAMAGED">
        <span class="tipo-label">DAMAGED</span>
      </label>
      
      <label class="tipo-card" 
            [class.selected]="pIR.get('claimType')?.value === 'PILFERED'">
        <input type="radio" 
              formControlName="claimType" 
              value="PILFERED">
        <span class="tipo-label">PILFERED</span>
      </label>
    </div>
  </div>

  <div class="section">
    <div class="form-field">
      <label>Aeropuerto</label>
      <input type="text" formControlName="airportText" placeholder="Aeropuerto">
    </div>
      <div class="form-field">
      <label>Aerolinea</label>
      <input type="text" formControlName="airline" placeholder="Aerolinea">
    </div>
    <div class="form-field">
      <label>Referencia</label>
      <input type="text" formControlName="reference" placeholder="Referencia">
    </div>
  </div>
  <div class="section">
    <div class="form-field">
      <label>Apellidos del pasajero</label>
      <input type="text" formControlName="passengerLastName" placeholder="Apellidos del pasajero">
    </div>
    <div class="form-field">
      <label>Nombres del pasajero</label>
      <input type="text" formControlName="passengerName" placeholder="Nombres del pasajero">
    </div>
  </div>
  <div class="section">
    <div class="form-field">
      <label>Iniciales en el equipaje</label>
      <input type="text" formControlName="initials" placeholder="Iniciales en el equipaje">
    </div>
  </div>

  <div class="section">
    <h2>Bagtags</h2>
    
    <div class="form-group" formArrayName="bagtags">
      <div *ngFor="let bagtag of bagtags.controls; let i = index" class="bagtag-item">
        <div [formGroupName]="i">
          <input type="text" 
                formControlName="number" 
                placeholder="Ej: ABC123456"
                class="bagtag-input">
          
          <button type="button" 
                  class="btn-remove"
                  (click)="eliminarBagtag(i)"
                  [disabled]="bagtags.length <= 1">
            ✕ Eliminar
          </button>
        </div>
      </div>
    </div>
    
    <button type="button" 
            class="btn-add"
            (click)="agregarBagtag()"
            [disabled]="bagtags.length >= 5">
      + Agregar Bagtag
    </button>
  </div>

  <div class="section">
    <h2>Color/tipo/descripcion</h2>

    <div class="form-group" formArrayName="bagDescription">
      <div *ngFor="let description of bagDescription.controls; let i = index" class="bagtag-item">
        <div [formGroupName]="i">
          <input type="text" 
                formControlName="description" 
                placeholder="Ej: 234/43/32"
                class="bagtag-input">
          
          <button type="button" 
                  class="btn-remove"
                  (click)="eliminarBagDescription(i)"
                  [disabled]="bagDescription.length <= 1">
            ✕ Eliminar
          </button>
        </div>
      </div>
    </div>
    
    <button type="button" 
            class="btn-add"
            (click)="agregarBagDescription()"
            [disabled]="bagDescription.length >= 5">
      + Agregar descripcion de maleta
    </button>
  </div>

  <div class="form-group" formArrayName="traceRoute">
      <h2>Ruta a rastrear</h2>
    <div *ngFor="let stop of traceRoute.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="traceRouteStop" placeholder="Ruta {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarRutaARastrear(i)"
                [disabled]="traceRoute.length <= 1">
          ✕ Eliminar
        </button>

      </div>
    </div>
    <button type="button" 
        class="btn-add"
        (click)="agregarRutaARastrear()" 
        [disabled]="traceRoute.length >= 5">
      + Agregar Ruta a Rastrear
    </button>
  </div>

  <div class="form-group" formArrayName="flightNumber">
      <h2>Numero de vuelo</h2>
    <div *ngFor="let flight of flightNumber.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="flightNo" placeholder="Numero de vuelo {{ i + 1 }}">
        </div>

        <div class="form-field">
          <input
            type="datetime-local"
            formControlName="flightDate"
            placeholder="Fecha y hora de vuelo {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarVuelo(i)"
                [disabled]="flightNumber.length <= 1">
          ✕ Eliminar
        </button>
      </div>

    </div>
    <button type="button" 
        class="btn-add"
        (click)="agregarVuelo()" 
        [disabled]="flightNumber.length >= 5">
      + Agregar Vuelo
    </button>
  </div>

    <div class="form-group" formArrayName="bagIdentification">
      <h2>Marca en la maleta</h2>
    <div *ngFor="let identification of bagIdentification.controls; let i = index" class="ruta-item">
      <div [formGroupName]="i">
        
        <div class="form-field">
          <input type="text" formControlName="mark" placeholder="Marca {{ i + 1 }}">
        </div>
        
        <button type="button" 
                class="btn-remove"
                (click)="eliminarIdentificacion(i)"
                [disabled]="bagIdentification.length <= 1">
          ✕ Eliminar
        </button>
      </div>

    </div>
    <button type="button" 
        class="btn-add"
        (click)="agregarIdentificacion()" 
        [disabled]="bagIdentification.length >= 5">
      + Agregar Identificación
    </button>
  </div>
  

  <div class="section">
    <button type="submit" 
            class="btn-submit"
            [disabled]="pIR.invalid">
      Enviar
    </button>
  </div>
</form>