<div class="baggage-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Dashboard de Equipaje</h1>
      <p class="header-subtitle">Gestión de reclamos y equipaje</p>
    </div>
  </div>

  <!-- Metrics Grid -->
  <div class="metrics-grid">
    <div *ngFor="let metric of metrics" class="metric-card" [style.border-top]="'4px solid ' + metric.color">
      <div class="metric-icon">
        <mat-icon>{{ metric.icon }}</mat-icon>
      </div>
      <div class="metric-content">
        <h3 class="metric-title">{{ metric.title }}</h3>
        <p class="metric-value">
          {{ metric.title.includes("Indemnización") ? ('$' + metric.value) : metric.value }}
        </p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>Acciones Rápidas</h2>
    <div class="actions-grid">
      <button routerLink="claim/new" class="action-btn action-new">
        <mat-icon class="action-icon">add_circle_outline</mat-icon>
        <span>Nuevo Reclamo</span>
      </button>
      <button routerLink="claim/list" class="action-btn action-list">
        <mat-icon class="action-icon">list_alt</mat-icon>
        <span>Ver Reclamos</span>
      </button>
      <button class="action-btn action-report">
        <mat-icon class="action-icon">bar_chart</mat-icon>
        <span>Reportes</span>
      </button>
    </div>
  </div>

  <!-- Recent Claims Table -->
  <div class="recent-claims">
    <div class="section-header">
      <h2>Reclamos Recientes</h2>
      <a routerLink="claim/list" class="view-all">Ver todos →</a>
    </div>

    <!-- Estado de carga -->
    <div *ngIf="loading" class="loading-state">
      <p>Cargando reclamos recientes...</p>
    </div>

    <!-- Tabla dinámica con datos del backend -->
    <div *ngIf="!loading" class="table-wrapper">
      <table class="recent-table">
        <thead>
          <tr>
            <th>PIR</th>
            <th>Tipo</th>
            <th>Pasajero</th>
            <th>Vuelo</th>
            <th>Ruta</th>
            <th>Fecha</th>
            <th>BagTag</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
          <!-- Removed actions column and made entire row clickable -->
          <tr *ngFor="let claim of recentClaims" class="table-row clickable-row" (click)="navigateToClaim(claim.pir!)">
            <td class="cell-pir">{{ claim.pir }}</td>
            <td class="cell-type">
              <span [class]="'badge ' + getTypeBadgeClass(claim.tipo)">
                {{ claim.tipo }}
              </span>
            </td>
            <td class="cell-passenger">{{ claim.pasajero }}</td>
            <td class="cell-flight">{{ claim.vuelo }}</td>
            <td class="cell-route">{{ claim.ruta }}</td>
            <td class="cell-date">{{ claim.fecha }}</td>
            <td class="cell-bagtag">{{ claim.bagTag }}</td>
            <td class="cell-status">
              <span [class]="'status-badge ' + getStatusBadgeClass(claim.estado)">
                {{ claim.estado }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Estado vacío cuando no hay reclamos -->
    <div *ngIf="!loading && recentClaims.length === 0" class="empty-state">
      <p>No hay reclamos registrados</p>
    </div>
  </div>

  <!-- Router Outlet for nested routes -->
  <router-outlet />
</div>
